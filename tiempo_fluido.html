<!doctype html>
<html>
  <head>
    <title>Tiempo Fluido</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2">
      
    <!--
    <link rel="stylesheet" type="text/css" href="assets/jquery.mobile.1.4.5/jquery.mobile-1.4.5.min.css" media="screen" />
    -->
<!--
   <link rel="stylesheet" type="text/css" href="assets/jquery.mobile.1.4.5/jquery.mobile.theme-1.4.5.min.css" media="screen" />
-->    
    <link rel="stylesheet" type="text/css" href="css/tiempo_fluido.css" media="screen" />
    <!--
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-material-design.min.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="css/ripples.min.css" media="screen" />
    -->
    <script src="assets/modernizr.js"></script>
    <!--<script src="assets/.js"></script>-->
    
    <link rel="stylesheet" type="text/css" href="assets/dev/style.css" media="screen" />
    
    <script>
      
      var $consola, $log, trace;
      trace=function(e){
        /* * /
        if (console.log){
          console.log(e);
        } else {
        /* */
          alert(e);
        /* * /
        }
        // */
      };
      
      Modernizr.load([
        {
          load: "assets/jquery-2.2.3.min.js",
          complete: function (){
            if(!window.jQuery){
              trace("fallo jQuery");
            }
          }
        },
        //"assets/jquery.mobile.1.4.5/jquery.mobile-1.4.5.min.js",
        /*
        "assets/bootstrap.min.js",
        "assets/material.min.js",
        "assets/ripples.min.js",
        */
        "assets/moment.min.js",
        "assets/jquery.storageapi.min.js",
        "assets/jquery.serializejson.min.js",
        "assets/populateform.js",
        "assets/varios.js",
        "js/ui.js",
        "js/carga.js",
        "js/jornada.js",
        "js/grilla.js",
        "js/io.js",
        //"js/dev.js",
        {
          load: "js/tiempo_fluido.js",
          complete: function (){
            if(!window.tiempoFluido){
              trace("fallo tiempoFluido");
            } else {
              /*** DEV ***/
              //desbichador_init();
              /* */
              $("#clearAllNiceAlert").click(function(){
                $("#nice_alert alertbox").hide();
              });
              /* */
              trace("cargó con éxito tiempo_fluido.js");
              $log = $("#consola #log");
              $consola = $("#consola");
              $consola_fondo = $("#consola_fondo");
              $consola_btn = $("#consola_btn");
              trace = function (e){
                $log.append("<li>"+e+"</li>");
              }
              $consola_btn.bind("click",function(){
                $consola.toggleClass("abierta");
                if($consola.hasClass("abierta")){
                  $consola_fondo.show();
                  $consola_fondo.bind("click", function(){
                    $consola_btn.click();
                  });
                } else {
                  $consola_fondo.hide();
                  $consola_fondo.unbind("click");
                }
              });

              var miTiempoFluido = new tiempoFluido.aplicacion();
              miTiempoFluido.iniciar();
            }
          }/* /complete */
        }
      ]);/* /Modernizr.load */
    </script>

    <!-- *** DEV *** -->
    <!-- - ->
    <link rel="stylesheet" type="text/css" media="screen" href="assets/desbichador/desbichador.css" />
    <script src="assets/desbichador/desbichador.js"></script>
    <!-- -->
    
    <link rel="stylesheet" type="text/css" media="screen" href="assets/nicealert/style.css" />
    <script src="assets/nicealert/nice_alert.js"></script>
    <!-- -->
  </head>

  <body>
  <!-- ------------------ -->

    <header id="mi_cabecera">
      <h1>Tiempo Fluido</h1>
      <nav id="menu_principal" class="barra" data-tipo-objetivo="seccion" >
        <ul>
          <li><a id="m_inicio" href="#inicio" >Inicio</a></li>
          <li><a id="m_verCargas" href="#verCargas" >Ver cargas</a></li>
          <li><a id="m_verJornada" href="#verJornada" >Ver jornada</a></li>
          <li><a id="m_verGrilla" href="#verGrilla" >Ver grilla</a></li>
          <li><a id="m_configuracion" href="#configuracion" >Configuración</a></li>
        </ul>
      </nav><!-- /#menu_principal -->
    </header><!-- /#mi_cabecera -->

  <!-- ------------------ -->

    <section id="inicio" class="seccion">
      <header>
        <h1>Inicio</h1>
      </header>
      <section id="bienvenida" class="subseccion">
        <header>
          <h2>Bienvenido <span class="valor perfil nombre"></span></h2>
        </header>
        <div class="mensaje SIN_PERFIL">
          <p>¡No hay perfil definido. Tienes que definir uno para comenzar!</p>
        </div>
        <div class="mensaje SIN_CONFIGURACION">
          <p>No hay configuradas preferencias para el perfil <span class="valor perfil id"></span>.</p>
          <p>Puedes elegir entre configurar las preferencias de la aplicación y las características de tu tiempo o comenzar a usar con los valores por defecto.</p>
          <button
            data-accion="configurarPreferencias" 
            class="configurarPreferencias">
            Configurar Preferencias
          </button> 
          <button 
            data-accion="comenzarYa" 
            class="comenzarYa">
            Comenzar ya
          </button>
        </div>
      </section> <!-- /#bienvenida.subseccion -->

      <section id="tablero" class="subseccion">
        <header>
          <h2>¡Hola <span class="valor perfil nombre"></span>!</h2>
        </header>
        <p>¿Qué hacemos ahora?</p>
        <div id="acciones_preferidas" >
        (aqui van las acciones que el usuario configura como preferidas al comienzo)
        </div><!-- /#acciones_preferidas -->
      </section> <!-- /#tablero.subseccion -->

    </section><!-- /#inicio.seccion -->

  <!-- ------------------ -->

    <section id="verCargas" class="seccion">
      <header>
        <h1>Cargas</h1>
      </header>
      <p>Administrador de cargas.</p>
      <div>
        <div class="barra_acciones barra">
          <ul>
            <li><a id="a_agregarCarga" href="#agregarCarga" data-icon="plus">Agregar carga</a></li>
            <li><a id="a_modificarCarga" href="#modificarCarga" data-icon="edit">Modificar carga</a></li>
            <li><a id="a_listarCargas" href="#listarCargas" data-icon="bullets">Listar cargas</a></li>
            <!--
            <li><a id="a_agregarPlantilla" href="#agregarPlantilla" data-icon="plus">Agregar plantilla</a></li>
            <li><a id="a_biblioteca" href="#biblioteca" data-icon="bullets">Biblioteca</a></li>
            -->
          </ul>
        </div><!-- .barra_acciones -->
        
        <div id="agregarCarga" 
          class="subseccion"
          data-plantilla="abm_carga" 
          data-plantilla-enviar="Agregar">
          <p>ABM Carga: Agregar</p>
        </div><!-- /#agregar_carga -->
        
        <div id="modificarCarga" 
             class="subseccion ui-content" 
             data-plantilla="abm_carga" 
             data-plantilla-enviar="Guardar">
          <p>ABM Carga: Modificar</p>
        </div><!-- /#modificarCarga -->
        
        <div id="listarCargas" class="subseccion ui-content">
          <p>Listar cargas</p>
          <div class="filtros">
            <button class="">Todas</button>
          </div>
          <table class="listado">
            <thead>
              <!--
              <tr>
                <th class="acciones"><button class="modificarCarga">M</button></th>
                <th data-id="id" data-class="valor" >ID</th>
                <th data-id="titulo" data-class="valor" >Título</th>
                <th data-id="cantidad" data-class="valor" >Cantidad</th>
                <th class="acciones"><button class="borrarCarga">X</button></th>
              </tr>
              -->
            </thead>
            <tbody>
              <tr data-plantilla-id="filaCarga" class="plantilla_html">
                <td class="acciones"><button class="modificarCarga">M</button></td>
                <td data-id="id" data-class="valor" >ID</td>
                <td data-id="titulo" data-class="valor" >Título</td>
                <td data-id="cantidad" data-class="valor" >Cantidad</td>
                <td class="acciones"><button class="borrarCarga">X</button></td>
              </tr>
              
            </tbody>
          </table>
        </div><!-- /#listarCargas -->
      </div><!-- /tabs -->
      
      <div data-plantilla-id="abm_carga" class="plantilla_html abm_carga">
        <form>
          <fieldset>
            <div class="acordion">
              <h2>Carga</h2>
              <legend></legend>
              <div class="form-group">
                <label for="id" class="">ID</label>
                <div class="">
                  <input type="hidden" name="id">
                  <input type="text" name="id">
                </div>
              </div>
              <div class="form-group">
                <label for="titulo" class="">Título</label>
                <div class="">
                  <input type="text" class="form-control" name="titulo" placeholder="Título">
                </div>
              </div>
              <div class="form-group">
                <label for="cantidad" class="">Cantidad</label>
                <div class="">
                  <input type="number" class="form-control" name="cantidad" placeholder="Cantidad">
                </div>
              </div>
              <div class="form-group">
                <label for="duracion" class="">Duración</label>
                <div class="">
                  <input type="number" class="form-control" name="duracion" placeholder="Duración">
                </div>
              </div>
              <div class="form-group">
                <label for="fechaIni" class="">Fecha Inicial</label>
                <div class="">
                  <input type="text" class="form-control" name="fechaIni" placeholder="Fecha Inicial">
                </div>
              </div>
              <div class="form-group">
                <label for="fechaFin" class="">Fecha Final</label>
                <div class="">
                  <input type="text" class="form-control" name="fechaFin" placeholder="Fecha Final">
                </div>
              </div>
              <div class="form-group">
                <label for="fija" class="">Fija</label>
                <div class="">
                  <input type="checkbox" class="form-control" name="fija" placeholder="Fija">
                </div>
              </div>
              <div class="form-group">
                <label for="uniforme" class="">Uniforme</label>
                <div class="">
                  <input type="checkbox" class="form-control" name="uniforme" placeholder="Uniforme">
                </div>
              </div>
              <div class="form-group">
                <label for="continua" class="">Continua</label>
                <div class="">
                  <input type="checkbox" class="form-control" name="continua" placeholder="Continua">
                </div>
              </div>
              <div class="form-group">
                <label for="distribucion" class="">Distribución</label>
                <div class="especial array">
                  <input type="text" class="form-control" name="distribucion" placeholder="distribucion">
                </div>
              </div>
              
              <div class="form-group">
                <label for="resto" class="">Resto</label>
                <div class="">
                  <input type="text" class="form-control" name="resto" placeholder="resto">
                </div>
              </div>
<!--
distribucion : array
patron: array / patron de distribucion
contenedor: id de la carga parent
contenidos: array de las subcargas
prioridad: 0 mayo, 9 menor
recurrente: repite?
responsable: id del usuario que debe completar la tarea
equipo: array de listado usuarios
resto: se actualiza con lo que queda por terminar

Metodos:
Escurrirse - distribuir una carga en los huecos
-->
              <div class="form-group">
                <div class="">
                  <!--<button type="button" data-accion="cancelar" class="">Cancelar</button>-->
                  <button type="button" data-accion="enviar" class="enviar">(acción)</button>
                </div>
              </div>
            </div><!-- /.acordion -->
            <!-- - ->
            <div class="control">
              <button type="button" class="control btn paginado siguiente">sig.</button>
              <button type="button" class="control btn paginado anterior">ant.</button>
            </div>
            <!-- -->
          </fieldset>
        </form>
      </div><!-- /#abm_carga -->
      
    </section><!-- /#verCargas.seccion -->

  <!-- ------------------ -->

    <section id="verJornada" class="seccion">
      <header>
        <h1>Ver jornada</h1>
      </header>
      <div role="main" class="ui-content">
        <p>Hola!</p>
      </div>      
    </section><!-- /#verJornada -->

  <!-- ------------------ -->

    <section id="verGrilla" class="seccion">
      <header>
        <h1>Ver grilla</h1>
      </header>
      <div role="main" class="ui-content">
        <p>Hola!</p>
      </div>      
    </section><!-- /#verGrilla -->

  <!-- ------------------ -->

    <section id="configuracion" class="seccion">
      <header>
        <h1>Configuración</h1>
      </header>
      <p>Perfil de usuario y preferencias de funcionamiento general.</p>

      <div class="tabs">
      
        <div class="barra">
          <ul>
            <li><a id="a_perfil" href="#perfil" data-icon="user">Perfil</a></li>
            <li><a id="a_preferencias" href="#preferencias" data-icon="bullets">Preferencias</a></li>
            <li><a id="a_otras" href="#otras" data-icon="bullets">Otras</a></li>
            <li><a id="a_dev" href="#dev" data-icon="power">DEV</a></li>
          </ul>
        </div><!-- .barra -->
        
        <section id="perfil" class="subseccion">
          <form>
            <fieldset>
              <legend>Perfil de usuario</legend>

              <div class="form-group">
                <label for="nombre" class="">Nombre</label>
                <div class="">
                  <input type="text" class="" name="nombre" placeholder="Nombre real">
                </div>
              </div>

              <div class="form-group">
                <label for="alias" class="">Id (alias)</label>
                <div class="">
                  <input type="text" class="" name="alias" placeholder="Alias ó apodo">
                </div>
              </div>

              <div class="form-group">
                <label for="email" class="">Email</label>
                <div class="">
                  <input type="text" class="" name="email" placeholder="Email">
                </div>
              </div>

              <div class="form-group">
                <div class="">
                  <!--<button type="button" data-accion="reset" class="">Reset</button>-->
                  <button type="button" data-accion="enviar" class="enviar">Crear Perfil</button>
                </div>
              </div>

           </fieldset>
          </form>
        </section><!-- /#perfil -->
        
        <section id="preferencias" class="subseccion">
          <form>
            <fieldset>
              <legend>Preferencias</legend>

              <div class="form-group">
                <label for="tiempoPorJornada" class="">Tiempo por jornada</label>
                <div class="">
                  <input type="text" class="" name="tiempoPorJornada" data-value-type="number" placeholder="horas">
                </div>
              </div>
              <div class="form-group">
                <label for="tiempoIntercargas" class="">Tiempo entre cargas</label>
                <div class="">
                  <input type="text" class="" name="tiempoIntercargas" data-value-type="number" placeholder="minutos">
                </div>
              </div>
              <div class="form-group">
                <label for="reservaContingencias" class="">Reserva para contingencias (hs:min)</label>
                <div class="">
                  <input type="text" class="" name="reservaContingencias" data-value-type="number" placeholder="horas:minutos">
                </div>
              </div>
              <div class="form-group">
                <label for="tiempoMinimo" class="">Tiempo mínimo por tarea por día min)</label>
                <div class="">
                  <input type="text" class="" name="tiempoMinimo" data-value-type="number" placeholder="minutos">
                </div>
              </div>

              <div name="diasDeSemana" class="">
                <p>Días de la semana laborable</p>
                <label for="diasDeSemana[lun]" class="">lunes</label>
                <input type="checkbox" class="" name="diasDeSemana[lun]" value="lun">
                <label for="diasDeSemana[mar]" class="">martes</label>
                <input type="checkbox" class="" name="diasDeSemana[mar]" value="mar">
                <label for="diasDeSemana[mie]" class="">miercoles</label>
                <input type="checkbox" class="" name="diasDeSemana[mie]" value="mie">
                <label for="diasDeSemana[jue]" class="">jueves</label>
                <input type="checkbox" class="" name="diasDeSemana[jue]" value="jue">
                <label for="diasDeSemana[vie]" class="">viernes</label>
                <input type="checkbox" class="" name="diasDeSemana[vie]" value="vie">
                <label for="diasDeSemana[sab]" class="">sábado</label>
                <input type="checkbox" class="" name="diasDeSemana[sab]" value="sab">
                <label for="diasDeSemana[dom]" class="">domingo</label>
                <input type="checkbox" class="" name="diasDeSemana[dom]" value="dom">
              </div>
              
              <div class="form-group">
                <div class="">
                  <!--
                  <button type="button" class="">Reset</button>
                  -->
                  <button type="button" data-accion="enviar" class="enviar">Salvar preferencias</button>
                </div>
              </div>
            </fieldset>
          </form>
        </section><!-- /#preferencias.subseccion -->
        
        <div id="otras" class="subseccion">
          <h1>Otras configuraciones</h1>
        </div><!-- /#otras.subseccion -->
        
        <div id="dev" class="subseccion">
          <header>
            <h2>Opciones desarrollador</h2>
            <p>(manejarse cuidado)</p>
          </header>
          <section>
            <h3>Local storage</h3>
            <p>
              Manejo del local storage del navegador y los datos almacenados.
            </p>
            <button 
              id="dev_borrar_todo" 
              class="icon-alert">
              BORRAR TODO
            </button>
            <button 
              id="dev_borrar_cargas" 
              class="icon-alert">
              BORRAR CARGAS
            </button>
          </section>
        </div><!-- /#dev.subseccion -->
        
      </div><!-- /.tabs --> 
      
    </section><!-- /#configuracion.seccion -->
 
  <!-- ------------------ -->
 
    <footer>
      <!-- navegación -->
      <nav id="menu_accion" class="barra_acciones barra">
        <ul>
          <li>
            <a id="m_agregarCarga" class="" href="#agregarCarga" ><span>Agregar carga</span></a>
          </li>
        </ul>
      </nav>
    </footer>
    
  <!-- ------------------ -->
  
    <div id="dialogos_div"></div>
    
    <div id="dialogo_confirmar" data-plantilla-id="dialogo_confirmar" class="plantilla_html">
      <header>
        <h1>Confirmar</h1>
      </header>
      <div class="contenido">
        <h3 class="mensaje">(mensaje)</p>
        <button class="dialogo_no" >NO</button>
        <button class="dialogo_si" >SI</button>
      </div><!-- /.contenido -->
    </div><!-- /#dialogo_confirmar -->
    
    <div id="consola_fondo"></div>
    <div id="consola">
      <header class="cabecera">
        <button id="consola_btn" class="btn btn-fab"><span>>CONSOLA</span></button>
        <h3>CONSOLA</h3>
      </header>
      <ol id="log">
      </ol><!-- /#log -->
    </div><!-- /#consola -->
    
    
    <!-- /* DEV */ -->
    <div id="clearAllNiceAlert" style="display:block;position:fixed;top:10px;left:40%;padding:.25em;background-color:#f00;border-radius:.25em;z-index:9100" class="btn btn-raised btn-danger btn-xs">
    Clear All NiceAlerts
    </div>
    <!-- -->

  </body>
</html>
